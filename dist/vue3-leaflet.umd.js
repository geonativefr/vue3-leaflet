(function(g,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("vue"),require("leaflet"),require("@vueuse/core"),require("leaflet.gridlayer.googlemutant/dist/Leaflet.GoogleMutant.js"),require("leaflet.smooth_marker_bouncing"),require("leaflet-pegman")):typeof define=="function"&&define.amd?define(["exports","vue","leaflet","@vueuse/core","leaflet.gridlayer.googlemutant/dist/Leaflet.GoogleMutant.js","leaflet.smooth_marker_bouncing","leaflet-pegman"],u):(g=typeof globalThis!="undefined"?globalThis:g||self,u(g["vue3-leaflet"]={},g.Vue,g.L,g.core))})(this,function(g,u,v,y){"use strict";var It=Object.defineProperty,Nt=Object.defineProperties;var Dt=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var nt=(g,u,v)=>u in g?It(g,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):g[u]=v,O=(g,u)=>{for(var v in u||(u={}))ot.call(u,v)&&nt(g,v,u[v]);if(V)for(var v of V(u))st.call(u,v)&&nt(g,v,u[v]);return g},rt=(g,u)=>Nt(g,Dt(u));var at=(g,u)=>{var v={};for(var y in g)ot.call(g,y)&&u.indexOf(y)<0&&(v[y]=g[y]);if(g!=null&&V)for(var y of V(g))u.indexOf(y)<0&&st.call(g,y)&&(v[y]=g[y]);return v};function lt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var C=lt(v);const ct={__name:"MapContainer",props:{center:{type:[v.LatLng,Array,Object],default:()=>new v.LatLng(0,0)},zoom:{type:Number,default:13},zoomControl:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!0},bounds:{type:Array,default:void 0}},emits:["ready","move","zoomend"],setup(t,{emit:n}){const e=t,{center:o,zoom:s,zoomControl:r,bounds:c,scrollWheelZoom:h}=u.toRefs(e),d=u.reactive({scrollWheelZoom:h}),i=y.templateRef("container"),a=u.ref();function l(f,p){p.length>0&&f.fitBounds(p)}return u.onMounted(()=>{const f=new v.Map(y.get(i),d);u.provide("map",f),u.watch(o,p=>f.setView(p,e.zoom),{immediate:!0}),u.watch(s,p=>f.setView(e.center,p),{immediate:!0}),u.watch(r,p=>p?f.zoomControl.addTo(f):f.zoomControl.remove(),{immediate:!0}),y.whenever(c,p=>l(f,p),{immediate:!0}),y.set(a,f),f.on("move",p=>n("move",{event:p,center:f.getCenter()})),f.on("zoomend",()=>n("zoomend",f.getZoom())),n("ready",f)}),(f,p)=>(u.openBlock(),u.createElementBlock("div",{ref_key:"container",ref:i},[a.value?u.renderSlot(f.$slots,"default",{key:0,map:a.value}):u.createCommentVNode("",!0)],512))}},ht={__name:"OpenStreetMap",props:{url:{type:String,default:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"},attribution:{type:String,default:'&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors'},type:{type:String,default:"roadmap",validator:t=>["roadmap"].includes(t)}},setup(t){const n=t,e=u.ref(u.inject("map")),o=C.default.tileLayer(n.url,{attribution:n.attribution});return u.provide("layer",o),y.whenever(e,s=>s.addLayer(o),{immediate:!0}),(s,r)=>u.renderSlot(s.$slots,"default")}},ut={__name:"Mapbox",props:{url:{type:String,default:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token={apiKey}"},apiKey:{type:String,required:!0},attribution:{type:String,default:'&copy <a href="https://www.mapbox.com/about/maps/">Mapbox</a>&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> - <a href="https://www.mapbox.com/map-feedback/">Improve this map</a>'},tileSize:{type:Number,default:512},zoomOffset:{type:Number,default:-1},type:{type:String,default:"roadmap",validator:t=>["roadmap"].includes(t)}},setup(t){const n=t,e=u.ref(u.inject("map")),o=u.reactive({apiKey:n.apiKey,attribution:n.attribution,tileSize:n.tileSize,zoomOffset:n.zoomOffset}),s=C.default.tileLayer(n.url,o);return u.provide("layer",s),y.whenever(e,r=>r.addLayer(s),{immediate:!0}),(r,c)=>u.renderSlot(r.$slots,"default")}};function z(t){return Object.assign(t,{render:()=>{}})}function K(t){return typeof t=="object"&&t!==null}function U(t){return K(t)&&Object.keys(t).forEach(n=>{if(K(t[n])){t[n]=U(t[n]);return}typeof t[n]=="undefined"&&(Array.isArray(t)?t.splice(n,1):delete t[n])}),t}async function W(t){var n;return window.gmapsApi=(n=window.gmapsApi)!=null?n:new Promise((e,o)=>{const s=document.createElement("script");s.type="text/javascript",s.src="https://maps.googleapis.com/maps/api/js?key="+t,s.async=!0,s.addEventListener("error",r=>o(r)),s.addEventListener("abort",r=>o(r)),s.addEventListener("load",()=>{window.L=C.default,e(!0)}),document.head.appendChild(s)}),window.gmapsApi}const ft={__name:"GoogleMaps",props:{url:{type:String,default:"https://mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"},apiKey:{type:String,required:!0},type:{type:String,default:"roadmap",validator:t=>["roadmap","satellite","terrain","hybrid"].includes(t)}},setup(t){const n=t,{type:e}=u.toRefs(n),o=u.reactive({type:e}),s=l=>{const f=(m,w)=>C.default.gridLayer.googleMutant(w).addTo(m);return{load:async(m,w=o)=>{await W(l),f(m,w)}}},r=u.ref(u.inject("map")),c=u.reactive({apiKey:n.apiKey,attribution:n.attribution,tileSize:n.tileSize,zoomOffset:n.zoomOffset}),h=C.default.tileLayer(n.url,c),d=s(n.apiKey),i=u.ref();y.whenever(i,(l,f)=>f==null?void 0:f.remove()),u.watch(e,()=>a(u.unref(r)));async function a(l){y.set(i,await d.load(l,o))}return u.provide("layer",h),y.whenever(r,l=>a(l),{immediate:!0}),(l,f)=>u.renderSlot(l.$slots,"default")}},dt={__name:"Marker",props:{position:{type:[v.LatLng,Array,Object],required:!0},icon:{type:[String,Object,v.Icon],default:void 0},title:{type:String,default:void 0},alt:{type:String,default:void 0},opacity:{type:Number,default:void 0},tooltip:{type:String,default:void 0},bounce:{type:[Boolean,Number],default:!1},bounceHeight:{type:Number,default:void 0},contractHeight:{type:Number,default:void 0},bounceSpeed:{type:Number,default:void 0},contractSpeed:{type:Number,default:void 0},shadowAngle:{type:Number,default:void 0},elastic:{type:Boolean,default:void 0},exclusive:{type:Boolean,default:void 0}},emits:["click","bounceend"],setup(t,{emit:n}){const e=t;v.Marker.prototype._animateZoom=function(b){if(!this._map)return;const B=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center).round();this._setPos(B)};const{position:o,title:s,alt:r,opacity:c,bounce:h,bounceHeight:d,contractHeight:i,bounceSpeed:a,contractSpeed:l,shadowAngle:f,elastic:p,exclusive:m}=u.toRefs(e),w=u.reactive({title:s,alt:r,opacity:c}),S=u.computed(()=>{if(e.icon instanceof v.Icon)return e.icon;if(e.icon instanceof Object)return C.default.icon(e.icon);if(typeof e.icon=="string"){const b={iconSize:[50,50],iconAnchor:[22,50],popupAnchor:[0,-50]};return C.default.icon(O({iconUrl:e.icon},b))}}),x=u.reactive({bounceHeight:d,contractHeight:i,bounceSpeed:a,contractSpeed:l,shadowAngle:f,elastic:p,exclusive:m}),M=u.ref(u.inject("map")),k=C.default.marker(e.position,U(w));u.provide("layer",k),k.on("click",()=>n("click",k)),k.on("bounceend",()=>n("bounceend"));function j(b,B){if(typeof B=="boolean"){B?b.bounce():b.stopBouncing();return}b.bounce(B)}function $(b){C.default.setOptions(b,U(w)),b._removeIcon(),b._initIcon(),b.update()}return y.whenever(M,b=>b.addLayer(k),{immediate:!0}),y.whenever(o,b=>k.setLatLng(b)),y.whenever(S,b=>k.setIcon(b),{deep:!0,immediate:!0}),y.whenever(w,()=>$(k),{deep:!0,immediate:!0}),y.whenever(x,b=>k.setBouncingOptions(U(b)),{deep:!0,immediate:!0}),u.watch(h,b=>j(k,b),{immediate:!0}),u.onUnmounted(()=>k.remove()),(b,B)=>u.renderSlot(b.$slots,"default",{marker:u.unref(k)})}},pt={style:{opacity:"0"}},mt={ref:"popup-content",id:"popup-container"},yt={__name:"Popup",props:{position:{type:v.LatLng,default:void 0}},setup(t){const n=t;v.Popup.prototype._animateZoom=function(a){if(!this._map)return;const l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();L.DomUtil.setPosition(this._container,l.add(f))},window.fixPopupCloseEvent||(document.addEventListener("click",a=>{let l=a.target;for(;l!=null;){if(l.matches('a[href="#close"]')){a.preventDefault();return}l=l.parentElement}}),window.fixPopupCloseEvent=!0);const{position:e}=u.toRefs(n),o=y.templateRef("popup-content"),s=new v.Popup,r=u.inject("layer"),c=y.useMounted(),h=u.ref(!1);u.provide("layer",s);function d(){y.get(h)!==!0&&(y.get(r).bindPopup(s),y.set(h,!0))}function i(a){if(y.get(c)===!1)return;const l=a.firstElementChild instanceof Element;a.innerHTML.trim().length>0&&(s.setContent(l?a.firstElementChild:a),d())}return y.whenever(e,a=>s.setLatLng(a),{immediate:!0}),u.watch(o,i,{immediate:!0}),(a,l)=>(u.openBlock(),u.createElementBlock("div",pt,[u.createElementVNode("div",mt,[u.renderSlot(a.$slots,"default")],512)]))}};function J(t,n){if(n===!1)return t;var e=Math.pow(10,n===void 0?6:n);return Math.round(t*e)/e}var gt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function E(t,n,e){this.x=e?Math.round(t):t,this.y=e?Math.round(n):n}var Y=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};E.prototype={clone:function(){return new E(this.x,this.y)},add:function(t){return this.clone()._add(N(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(N(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new E(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new E(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(t){t=N(t);var n=t.x-this.x,e=t.y-this.y;return Math.sqrt(n*n+e*e)},equals:function(t){return t=N(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=N(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+J(this.x)+", "+J(this.y)+")"}};function N(t,n,e){return t instanceof E?t:gt(t)?new E(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new E(t.x,t.y):new E(t,n,e)}var _t=z({props:{position:{type:v.LatLng,required:!0},text:{type:String,required:!0},direction:{type:String,default:"auto"},offset:{type:E,default:()=>new E(0,0)},permanent:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},opacity:{type:Number,default:.9}},setup(t){const{position:n,text:e}=u.toRefs(t),o=u.reactive({direction:t.direction,offset:t.offset,permanent:t.permanent,sticky:t.sticky,opacity:t.opacity}),s=u.inject("map"),r=new v.Tooltip;r.setLatLng(t.position).addTo(s),u.watch(n,c=>r.setLatLng(c)),u.watch(e,c=>r.setContent(c),{immediate:!0}),u.watch(o,c=>C.default.setOptions(r,c),{immediate:!0})}}),R={color:{type:String},weight:{type:Number},opacity:{type:Number},fillColor:{type:String}},wt=z({props:O({center:{type:[v.LatLng,Array,Object],required:!0},radius:{type:Number,required:!0}},R),setup(t){const{center:n,radius:e,color:o,weight:s,opacity:r,fillColor:c}=u.toRefs(t),h=u.computed(()=>t.color!=null),d=u.computed(()=>t.fillColor!=null),i=u.reactive({radius:e,stroke:h,color:o,weight:s,opacity:r,fill:d,fillColor:c}),a=u.ref(u.inject("map")),l=C.default.circle(t.center,U(i));u.provide("layer",l),y.whenever(a,f=>f.addLayer(l),{immediate:!0}),y.whenever(i,f=>C.default.setOptions(l,U(f),{deep:!0,immediate:!0})),y.whenever(n,f=>l.setLatLng(f)),u.onUnmounted(()=>l.remove())}}),vt={exports:{}};(function(t){(function(n){var e;e=C.default,t.exports=n(e)})(function(n){return n.Polyline._flat=n.LineUtil.isFlat||n.Polyline._flat||function(e){return!n.Util.isArray(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]!="undefined"},n.GeometryUtil=n.extend(n.GeometryUtil||{},{distance:function(e,o,s){return e.latLngToLayerPoint(o).distanceTo(e.latLngToLayerPoint(s))},distanceSegment:function(e,o,s,r){var c=e.latLngToLayerPoint(o),h=e.latLngToLayerPoint(s),d=e.latLngToLayerPoint(r);return n.LineUtil.pointToSegmentDistance(c,h,d)},readableDistance:function(e,o){var s=o!=="imperial",r;return s?e>1e3?r=(e/1e3).toFixed(2)+" km":r=e.toFixed(1)+" m":(e*=1.09361,e>1760?r=(e/1760).toFixed(2)+" miles":r=e.toFixed(1)+" yd"),r},belongsSegment:function(e,o,s,r){r=r===void 0?.2:r;var c=o.distanceTo(s),h=o.distanceTo(e)+e.distanceTo(s)-c;return h/c<r},length:function(e){var o=n.GeometryUtil.accumulatedLengths(e);return o.length>0?o[o.length-1]:0},accumulatedLengths:function(e){if(typeof e.getLatLngs=="function"&&(e=e.getLatLngs()),e.length===0)return[];for(var o=0,s=[0],r=0,c=e.length-1;r<c;r++)o+=e[r].distanceTo(e[r+1]),s.push(o);return s},closestOnSegment:function(e,o,s,r){var c=e.getMaxZoom();c===1/0&&(c=e.getZoom());var h=e.project(o,c),d=e.project(s,c),i=e.project(r,c),a=n.LineUtil.closestPointOnSegment(h,d,i);return e.unproject(a,c)},closest:function(e,o,s,r){var c,h=1/0,d=null,i,a,l,f;if(o instanceof Array)if(o[0]instanceof Array&&typeof o[0][0]!="number"){for(i=0;i<o.length;i++)f=n.GeometryUtil.closest(e,o[i],s,r),f&&f.distance<h&&(h=f.distance,d=f);return d}else if(o[0]instanceof n.LatLng||typeof o[0][0]=="number"||typeof o[0].lat=="number")o=n.polyline(o);else return d;if(!(o instanceof n.Polyline))return d;if(c=JSON.parse(JSON.stringify(o.getLatLngs().slice(0))),o instanceof n.Polygon){var p=function(x){if(n.Polyline._flat(x))x.push(x[0]);else for(var M=0;M<x.length;M++)p(x[M])};p(c)}if(n.Polyline._flat(c)){if(r){for(i=0,a=c.length;i<a;i++){var m=c[i];l=n.GeometryUtil.distance(e,s,m),l<h&&(h=l,d=m,d.distance=l)}return d}for(i=0,a=c.length;i<a-1;i++){var w=c[i],S=c[i+1];l=n.GeometryUtil.distanceSegment(e,s,w,S),l<=h&&(h=l,d=n.GeometryUtil.closestOnSegment(e,s,w,S),d.distance=l)}return d}else{for(i=0;i<c.length;i++)f=n.GeometryUtil.closest(e,c[i],s,r),f.distance<h&&(h=f.distance,d=f);return d}},closestLayer:function(e,o,s){for(var r=1/0,c=null,h=null,d=1/0,i=0,a=o.length;i<a;i++){var l=o[i];if(l instanceof n.LayerGroup){var f=n.GeometryUtil.closestLayer(e,l.getLayers(),s);f.distance<r&&(r=f.distance,c=f)}else typeof l.getLatLng=="function"?(h=l.getLatLng(),d=n.GeometryUtil.distance(e,s,h)):(h=n.GeometryUtil.closest(e,l,s),h&&(d=h.distance)),d<r&&(r=d,c={layer:l,latlng:h,distance:d})}return c},nClosestLayers:function(e,o,s,r){if(r=typeof r=="number"?r:o.length,r<1||o.length<1)return null;for(var c=[],h,d,i=0,a=o.length;i<a;i++){var l=o[i];if(l instanceof n.LayerGroup){var f=n.GeometryUtil.closestLayer(e,l.getLayers(),s);c.push(f)}else typeof l.getLatLng=="function"?(d=l.getLatLng(),h=n.GeometryUtil.distance(e,s,d)):(d=n.GeometryUtil.closest(e,l,s),d&&(h=d.distance)),c.push({layer:l,latlng:d,distance:h})}return c.sort(function(p,m){return p.distance-m.distance}),c.length>r?c.slice(0,r):c},layersWithin:function(e,o,s,r){r=typeof r=="number"?r:1/0;for(var c=[],h=null,d=0,i=0,a=o.length;i<a;i++){var l=o[i];typeof l.getLatLng=="function"?(h=l.getLatLng(),d=n.GeometryUtil.distance(e,s,h)):(h=n.GeometryUtil.closest(e,l,s),h&&(d=h.distance)),h&&d<r&&c.push({layer:l,latlng:h,distance:d})}var f=c.sort(function(p,m){return p.distance-m.distance});return f},closestLayerSnap:function(e,o,s,r,c){r=typeof r=="number"?r:1/0,c=typeof c=="boolean"?c:!0;var h=n.GeometryUtil.closestLayer(e,o,s);if(!h||h.distance>r)return null;if(c&&typeof h.layer.getLatLngs=="function"){var d=n.GeometryUtil.closest(e,h.layer,h.latlng,!0);d.distance<r&&(h.latlng=d,h.distance=n.GeometryUtil.distance(e,d,s))}return h},interpolateOnPointSegment:function(e,o,s){return n.point(e.x*(1-s)+s*o.x,e.y*(1-s)+s*o.y)},interpolateOnLine:function(e,o,s){o=o instanceof n.Polyline?o.getLatLngs():o;var r=o.length;if(r<2)return null;if(s=Math.max(Math.min(s,1),0),s===0)return{latLng:o[0]instanceof n.LatLng?o[0]:n.latLng(o[0]),predecessor:-1};if(s==1)return{latLng:o[o.length-1]instanceof n.LatLng?o[o.length-1]:n.latLng(o[o.length-1]),predecessor:o.length-2};var c=e.getMaxZoom();c===1/0&&(c=e.getZoom());for(var h=[],d=0,i=0;i<r;i++)h[i]=e.project(o[i],c),i>0&&(d+=h[i-1].distanceTo(h[i]));for(var a=d*s,l=0,f=0,i=0;f<a;i++){var p=h[i],m=h[i+1];l=f,f+=p.distanceTo(m)}if(p==null&&m==null)var p=h[0],m=h[1],i=1;var w=f-l!==0?(a-l)/(f-l):0,S=n.GeometryUtil.interpolateOnPointSegment(p,m,w);return{latLng:e.unproject(S,c),predecessor:i-1}},locateOnLine:function(e,o,s){var r=o.getLatLngs();if(s.equals(r[0]))return 0;if(s.equals(r[r.length-1]))return 1;for(var c=n.GeometryUtil.closest(e,o,s,!1),h=n.GeometryUtil.accumulatedLengths(r),d=h[h.length-1],i=0,a=!1,l=0,f=r.length-1;l<f;l++){var p=r[l],m=r[l+1];if(i=h[l],n.GeometryUtil.belongsSegment(c,p,m,.001)){i+=p.distanceTo(c),a=!0;break}}if(!a)throw"Could not interpolate "+s.toString()+" within "+o.toString();return i/d},reverse:function(e){return n.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,o,s,r){if(s>r)return n.GeometryUtil.extract(e,n.GeometryUtil.reverse(o),1-s,1-r);s=Math.max(Math.min(s,1),0),r=Math.max(Math.min(r,1),0);var c=o.getLatLngs(),h=n.GeometryUtil.interpolateOnLine(e,o,s),d=n.GeometryUtil.interpolateOnLine(e,o,r);if(s==r){var i=n.GeometryUtil.interpolateOnLine(e,o,r);return[i.latLng]}h.predecessor==-1&&(h.predecessor=0),d.predecessor==-1&&(d.predecessor=0);var a=c.slice(h.predecessor+1,d.predecessor+1);return a.unshift(h.latLng),a.push(d.latLng),a},isBefore:function(e,o){if(!o)return!1;var s=e.getLatLngs(),r=o.getLatLngs();return s[s.length-1].equals(r[0])},isAfter:function(e,o){if(!o)return!1;var s=e.getLatLngs(),r=o.getLatLngs();return s[0].equals(r[r.length-1])},startsAtExtremity:function(e,o){if(!o)return!1;var s=e.getLatLngs(),r=o.getLatLngs(),c=s[0];return c.equals(r[0])||c.equals(r[r.length-1])},computeAngle:function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)*180/Math.PI},computeSlope:function(e,o){var s=(o.y-e.y)/(o.x-e.x),r=e.y-s*e.x;return{a:s,b:r}},rotatePoint:function(e,o,s,r){var c=e.getMaxZoom();c===1/0&&(c=e.getZoom());var h=s*Math.PI/180,d=e.project(o,c),i=e.project(r,c),a=Math.cos(h)*(d.x-i.x)-Math.sin(h)*(d.y-i.y)+i.x,l=Math.sin(h)*(d.x-i.x)+Math.cos(h)*(d.y-i.y)+i.y;return e.unproject(new n.Point(a,l),c)},bearing:function(e,o){var s=Math.PI/180,r=e.lat*s,c=o.lat*s,h=e.lng*s,d=o.lng*s,i=Math.sin(d-h)*Math.cos(c),a=Math.cos(r)*Math.sin(c)-Math.sin(r)*Math.cos(c)*Math.cos(d-h),l=(Math.atan2(i,a)*180/Math.PI+360)%360;return l>=180?l-360:l},destination:function(e,o,s){o=(o+360)%360;var r=Math.PI/180,c=180/Math.PI,h=6378137,d=e.lng*r,i=e.lat*r,a=o*r,l=Math.sin(i),f=Math.cos(i),p=Math.cos(s/h),m=Math.sin(s/h),w=Math.asin(l*p+f*m*Math.cos(a)),S=d+Math.atan2(Math.sin(a)*m*f,p-l*Math.sin(w));return S=S*c,S=S>180?S-360:S<-180?S+360:S,n.latLng([w*c,S])},angle:function(e,o,s){var r=e.latLngToContainerPoint(o),c=e.latLngToContainerPoint(s),h=Math.atan2(c.y-r.y,c.x-r.x)*180/Math.PI+90;return h+=h<0?360:0,h},destinationOnSegment:function(e,o,s,r){var c=n.GeometryUtil.angle(e,o,s),h=n.GeometryUtil.destination(o,c,r);return n.GeometryUtil.closestOnSegment(e,h,o,s)}}),n.GeometryUtil})})(vt);function Lt(t,n){return(t%n+n)%n}function bt(t){return Object.fromEntries(Object.entries(t).filter(([n,e])=>e!==void 0))}function q(t){return t.toString().trim().slice(t.toString().length-1,t.toString().length)==="m"}function X(t){return t.toString().trim().slice(t.toString().length-1,t.toString().length)==="%"}function Z(t){return t.toString().trim().slice(t.toString().length-2,t.toString().length)==="px"}function H(t,n){let e=n.getCenter(),o=n.latLngToLayerPoint(e),s={x:o.x+Number(t),y:o.y},r=n.layerPointToLatLng(s);return n.distance(e,r)}L.Polyline.include({arrowheads:function(t={}){const n={yawn:60,size:"15%",frequency:"allvertices",proportionalToTotal:!1};this.options.noClip=!0;let e=Object.assign({},n,t);return this._arrowheadOptions=e,this._hatsApplied=!0,this},buildVectorHats:function(t){this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove();let n=Object.getPrototypeOf(Object.getPrototypeOf(this.options)),e=Object.assign({},n,this.options),o=Object.assign({},e,t);o.smoothFactor=1,o.fillOpacity=1,o.fill=!!t.fill,o.interactive=!1;let s=t.size.toString(),r=[];const{frequency:c,offsets:h}=t;((h==null?void 0:h.start)||(h==null?void 0:h.end))&&this._buildGhosts({start:h.start,end:h.end}),(this._ghosts||this)._parts.forEach((a,l)=>{var B;const f=a.map(P=>this._map.layerPointToLatLng(P)),p=(()=>{let P=0;for(var _=0;_<a.length-1;_++)P+=this._map.distance(f[_],f[_+1]);return P})();let m,w,S,x;if(isNaN(c)?X(c)?console.error("Error: arrowhead frequency option cannot be given in percent.  Try another unit."):q(c)?(S=c.slice(0,c.length-1)/p,x=1/S,x=Math.floor(x),S=1/x):Z(c)&&(S=(()=>{let P=c.slice(0,c.length-2);return H(P,this._map)/p})(),x=1/S,x=Math.floor(x),S=1/x):(S=1/c,x=c),t.frequency==="allvertices")w=(()=>{let P=[];for(var _=1;_<f.length;_++){let T=L.GeometryUtil.angle(this._map,f[Lt(_-1,f.length)],f[_])+180;P.push(T)}return P})(),m=f,m.shift();else if(t.frequency==="endonly"&&f.length>=2)m=[f[f.length-1]],w=[L.GeometryUtil.angle(this._map,f[f.length-2],f[f.length-1])+180];else{m=[];let P=[];for(var M=0;M<x;M++){let _=L.GeometryUtil.interpolateOnLine(this._map,f,S*(M+1));_&&(P.push(_),m.push(_.latLng))}w=(()=>{let _=[];for(var T=0;T<P.length;T++){let G=L.GeometryUtil.angle(this._map,f[P[T].predecessor+1],f[P[T].predecessor]);_.push(G)}return _})()}let k=[];const j=(P,_={})=>{var D;let T=(D=_.yawn)!=null?D:t.yawn,G=L.GeometryUtil.destination(m[M],w[M]-T/2,P),A=L.GeometryUtil.destination(m[M],w[M]+T/2,P),I=[[G.lat,G.lng],[m[M].lat,m[M].lng],[A.lat,A.lng]],F=t.fill?L.polygon(I,O(O({},o),_)):L.polyline(I,O(O({},o),_));k.push(F)},$=(P,_={})=>{var it;let T=P.slice(0,P.length-2),G=(it=_.yawn)!=null?it:t.yawn,A=this._map.latLngToLayerPoint(m[M]),I=w[M],F=(180-I-G/2)*(Math.PI/180),D=(180-I+G/2)*(Math.PI/180),Tt=T*Math.sin(F),Ut=T*Math.cos(F),Gt=T*Math.sin(D),Et=T*Math.cos(D),Bt={x:A.x+Tt,y:A.y+Ut},At={x:A.x+Gt,y:A.y+Et},Q=this._map.layerPointToLatLng(Bt),tt=this._map.layerPointToLatLng(At),et=[[Q.lat,Q.lng],[m[M].lat,m[M].lng],[tt.lat,tt.lng]],zt=t.fill?L.polygon(et,O(O({},o),_)):L.polyline(et,O(O({},o),_));k.push(zt)};for(var M=0;M<m.length;M++){let b=t,{perArrowheadOptions:_}=b,T=at(b,["perArrowheadOptions"]);if(_=_?_(M):{},_=Object.assign(T,bt(_)),s=(B=_.size)!=null?B:s,q(s)){let G=s.slice(0,s.length-1);j(G,_)}else if(X(s)){let G=s.slice(0,s.length-1),A=(()=>t.frequency==="endonly"&&t.proportionalToTotal?p*G/100:p/(a.length-1)*G/100)();j(A,_)}else Z(s)?$(t.size,_):console.error("Error: Arrowhead size unit not defined.  Check your arrowhead options.")}r.push(...k)});let i=L.layerGroup(r);return this._arrowheads=i,this},getArrowheads:function(){return this._arrowheads?this._arrowheads:console.error("Error: You tried to call '.getArrowheads() on a shape that does not have a arrowhead.  Use '.arrowheads()' to add a arrowheads before trying to call '.getArrowheads()'")},_buildGhosts:function({start:t,end:n}){if(t||n){let e=this.getLatLngs();e=Array.isArray(e[0])?e:[e];const o=e.map(s=>{const r=(()=>{let c=0;for(var h=0;h<s.length-1;h++)c+=this._map.distance(s[h],s[h+1]);return c})();if(t){let c=(()=>{if(q(t))return Number(t.slice(0,t.length-1));if(Z(t)){let d=Number(t.slice(0,t.length-2));return H(d,this._map)}})(),h=L.GeometryUtil.interpolateOnLine(this._map,s,c/r);s=s.slice(h.predecessor===-1?1:h.predecessor+1,s.length),s.unshift(h.latLng)}if(n){let c=(()=>{if(q(n))return Number(n.slice(0,n.length-1));if(Z(n)){let d=Number(n.slice(0,n.length-2));return H(d,this._map)}})(),h=L.GeometryUtil.interpolateOnLine(this._map,s,(r-c)/r);s=s.slice(0,h.predecessor+1),s.push(h.latLng)}return s});this._ghosts=L.polyline(o,rt(O({},this.options),{color:"rgba(0,0,0,0)",stroke:0,smoothFactor:0,interactive:!1})),this._ghosts.addTo(this._map)}},deleteArrowheads:function(){this._arrowheads&&(this._arrowheads.remove(),delete this._arrowheads,delete this._arrowheadOptions,this._hatsApplied=!1),this._ghosts&&this._ghosts.remove()},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath(),this._hatsApplied&&(this.buildVectorHats(this._arrowheadOptions),this._map.addLayer(this._arrowheads)))},remove:function(){return this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove(),this.removeFrom(this._map||this._mapToAdd)}}),L.LayerGroup.include({removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&(this._layers[n]._arrowheads&&this._layers[n]._arrowheads.remove(),this._map.removeLayer(this._layers[n])),delete this._layers[n],this},onRemove:function(t,n){for(var n in this._layers)this._layers[n]&&this._layers[n].remove();this.eachLayer(t.removeLayer,t)}}),L.Map.include({removeLayer:function(t){var n=L.Util.stamp(t);return t._arrowheads&&t._arrowheads.remove(),t._ghosts&&t._ghosts.remove(),this._layers[n]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this}}),L.GeoJSON.include({geometryToLayer:function(t,n){var e=t.type==="Feature"?t.geometry:t,o=e?e.coordinates:null,s=[],r=n&&n.pointToLayer,c=n&&n.coordsToLatLng||L.GeoJSON.coordsToLatLng,h,d,i,a;if(!o&&!e)return null;switch(e.type){case"Point":return h=c(o),this._pointToLayer(r,t,h,n);case"MultiPoint":for(i=0,a=o.length;i<a;i++)h=c(o[i]),s.push(this._pointToLayer(r,t,h,n));return new L.FeatureGroup(s);case"LineString":case"MultiLineString":d=L.GeoJSON.coordsToLatLngs(o,e.type==="LineString"?0:1,c);var l=new L.Polyline(d,n);return n.arrowheads&&l.arrowheads(n.arrowheads),l;case"Polygon":case"MultiPolygon":return d=L.GeoJSON.coordsToLatLngs(o,e.type==="Polygon"?1:2,c),new L.Polygon(d,n);case"GeometryCollection":for(i=0,a=e.geometries.length;i<a;i++){var f=this.geometryToLayer({geometry:e.geometries[i],type:"Feature",properties:t.properties},n);f&&s.push(f)}return new L.FeatureGroup(s);default:throw new Error("Invalid GeoJSON object.")}},addData:function(t){var n=L.Util.isArray(t)?t:t.features,e,o,s;if(n){for(e=0,o=n.length;e<o;e++)s=n[e],(s.geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var c=this.geometryToLayer(t,r);return c?(c.feature=L.GeoJSON.asFeature(t),c.defaultOptions=c.options,this.resetStyle(c),r.onEachFeature&&r.onEachFeature(t,c),this.addLayer(c)):this},_pointToLayer:function(t,n,e,o){return t?t(n,e):new L.Marker(e,o&&o.markersInheritOptions&&o)}});var St=z({props:O({positions:{type:Array,required:!0},arrows:{type:Object,default:void 0}},R),setup(t){const{positions:n,color:e,weight:o,opacity:s,fillColor:r}=u.toRefs(t),c=u.computed(()=>t.color!=null),h=u.computed(()=>t.fillColor!=null),d=u.reactive({stroke:c,color:e,weight:o,opacity:s,fill:h,fillColor:r}),i=u.ref(u.inject("map")),a=C.default.polyline(t.positions,U(d));t.arrows&&a.arrowheads(t.arrows),u.provide("layer",a),y.whenever(i,l=>l.addLayer(a),{immediate:!0}),y.whenever(d,l=>C.default.setOptions(a,U(l),{deep:!0,immediate:!0})),y.whenever(n,l=>a.setLatLngs(l)),u.onUnmounted(()=>a.remove())}}),Mt=z({props:O({positions:{type:Array,required:!0}},R),setup(t){const{positions:n,color:e,weight:o,opacity:s,fillColor:r}=u.toRefs(t),c=u.computed(()=>t.color!=null),h=u.computed(()=>t.fillColor!=null),d=u.reactive({stroke:c,color:e,weight:o,opacity:s,fill:h,fillColor:r}),i=u.ref(u.inject("map")),a=C.default.polygon(t.positions,U(d));u.provide("layer",a),y.whenever(i,l=>l.addLayer(a),{immediate:!0}),y.whenever(d,l=>C.default.setOptions(a,U(l),{deep:!0,immediate:!0})),y.whenever(n,l=>a.setLatLngs(l)),u.onUnmounted(()=>a.remove())}}),Ct=z({props:{position:{type:String,default:void 0},zoomInTitle:{type:String,default:void 0},zoomOutTitle:{type:String,default:void 0}},setup(t){const n=u.ref(u.inject("map")),e=new v.Control.Zoom(U(O({},t))),o=s=>{var r;(r=s==null?void 0:s.zoomControl)==null||r.remove(),s.addControl(e)};y.whenever(n,o,{immediate:!0})}}),Pt=z({props:{position:{type:String,default:void 0},maxWidth:{type:Number,default:void 0},imperial:{type:Boolean,default:void 0},metric:{type:Boolean,default:void 0}},setup(t){const n=u.ref(u.inject("map")),e=C.default.control.scale(U(O({},t)));y.whenever(n,o=>o.addControl(e),{immediate:!0})}}),xt={exports:{}};/*!
  Copyright (c) 2016 Dominik Moritz

  This file is part of the leaflet locate control. It is licensed under the MIT license.
  You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
  */(function(t,n){(function(e,o){typeof o!="undefined"&&o.L?t.exports=e(L):t.exports=e(C.default),typeof o!="undefined"&&o.L&&(o.L.Control.Locate=e(L))})(function(e){const o=(i,a,l)=>{l=l.split(" "),l.forEach(function(f){e.DomUtil[i].call(this,a,f)})},s=(i,a)=>o("addClass",i,a),r=(i,a)=>o("removeClass",i,a),c=e.Marker.extend({initialize(i,a){e.Util.setOptions(this,a),this._latlng=i,this.createIcon()},createIcon(){const i=this.options;let a="";i.color!==void 0&&(a+=`stroke:${i.color};`),i.weight!==void 0&&(a+=`stroke-width:${i.weight};`),i.fillColor!==void 0&&(a+=`fill:${i.fillColor};`),i.fillOpacity!==void 0&&(a+=`fill-opacity:${i.fillOpacity};`),i.opacity!==void 0&&(a+=`opacity:${i.opacity};`);const l=this._getIconSVG(i,a);this._locationIcon=e.divIcon({className:l.className,html:l.svg,iconSize:[l.w,l.h]}),this.setIcon(this._locationIcon)},_getIconSVG(i,a){const l=i.radius,f=i.weight,p=l+f,m=p*2,w=`<svg xmlns="http://www.w3.org/2000/svg" width="${m}" height="${m}" version="1.1" viewBox="-${p} -${p} ${m} ${m}"><circle r="`+l+'" style="'+a+'" /></svg>';return{className:"leaflet-control-locate-location",svg:w,w:m,h:m}},setStyle(i){e.Util.setOptions(this,i),this.createIcon()}}),h=c.extend({initialize(i,a,l){e.Util.setOptions(this,l),this._latlng=i,this._heading=a,this.createIcon()},setHeading(i){this._heading=i},_getIconSVG(i,a){const l=i.radius,f=i.width+i.weight,p=(l+i.depth+i.weight)*2,m=`M0,0 l${i.width/2},${i.depth} l-${f},0 z`,w=`transform: rotate(${this._heading}deg)`,S=`<svg xmlns="http://www.w3.org/2000/svg" width="${f}" height="${p}" version="1.1" viewBox="-${f/2} 0 ${f} ${p}" style="${w}"><path d="`+m+'" style="'+a+'" /></svg>';return{className:"leaflet-control-locate-heading",svg:S,w:f,h:p}}}),d=e.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds(i){return i.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:c,compassClass:h,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(i,a){const l=e.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",i);l.title=a.strings.title,l.href="#",l.setAttribute("role","button");const f=e.DomUtil.create(a.iconElementTag,a.icon,l);if(a.strings.text!==void 0){const p=e.DomUtil.create(a.textElementTag,"leaflet-locate-text",l);p.textContent=a.strings.text,l.classList.add("leaflet-locate-text-active"),l.parentNode.style.display="flex",a.icon.length>0&&f.classList.add("leaflet-locate-icon")}return{link:l,icon:f}},onLocationError(i,a){alert(i.message)},onLocationOutsideMapBounds(i){i.stop(),alert(i.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(i){for(const a in i)typeof this.options[a]=="object"?e.extend(this.options[a],i[a]):this.options[a]=i[a];this.options.followMarkerStyle=e.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=e.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=e.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(i){const a=e.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=a,this._map=i,this._layer=this.options.layer||new e.LayerGroup,this._layer.addTo(i),this._event=void 0,this._compassHeading=null,this._prevBounds=null;const l=this.options.createButtonCallback(a,this.options);return this._link=l.link,this._icon=l.icon,e.DomEvent.on(this._link,"click",function(f){e.DomEvent.stopPropagation(f),e.DomEvent.preventDefault(f),this._onClick()},this).on(this._link,"dblclick",e.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),a},_onClick(){this._justClicked=!0;const i=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){const a=this.options.clickBehavior;let l=a.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(l=i?a.inView:a.inViewNotFollowing),a[l]&&(l=a[l]),l){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds);break}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){const i="ondeviceorientationabsolute"in window;if(i||"ondeviceorientation"in window){const a=this,l=function(){e.DomEvent.on(window,i?"deviceorientationabsolute":"deviceorientation",a._onDeviceOrientation,a)};DeviceOrientationEvent&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(f){f==="granted"&&l()}):l()}}},_deactivate(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?e.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&e.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&this.options.initialZoomLevel!==!1){var i=this.options.flyTo?this._map.flyTo:this._map.setView;i.bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel)}else if(this.options.keepCurrentZoomLevel){var i=this.options.flyTo?this._map.flyTo:this._map.panTo;i.bind(this._map)([this._event.latitude,this._event.longitude])}else{var i=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,i.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),e.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;const i=this._event.latlng;if(this.options.showCompass&&i&&this._compassHeading!==null){const a=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(i),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(a)):this._compass=new this.options.compassClass(i,this._compassHeading,a).addTo(this._layer)}this._compass&&(!this.options.showCompass||this._compassHeading===null)&&(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){this._event.accuracy===void 0&&(this._event.accuracy=0);const i=this._event.accuracy,a=this._event.latlng;if(this.options.drawCircle){const w=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(a).setRadius(i).setStyle(w):this._circle=e.circle(a,i,w).addTo(this._layer)}let l,f;if(this.options.metric?(l=i.toFixed(0),f=this.options.strings.metersUnit):(l=(i*3.2808399).toFixed(0),f=this.options.strings.feetUnit),this.options.drawMarker){const w=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(a),this._marker.setStyle&&this._marker.setStyle(w)):this._marker=new this.options.markerClass(a,w).addTo(this._layer)}this._drawCompass();const p=this.options.strings.popup;function m(){return typeof p=="string"?e.Util.template(p,{distance:l,unit:f}):typeof p=="function"?p({distance:l,unit:f}):p}this.options.showPopup&&p&&this._marker&&this._marker.bindPopup(m())._popup.setLatLng(a),this.options.showPopup&&p&&this._compass&&this._compass.bindPopup(m())._popup.setLatLng(a)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading(i){!isNaN(parseFloat(i))&&isFinite(i)?(i=Math.round(i),this._compassHeading=i,e.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(i){!this._active||(i.webkitCompassHeading?this._setCompassHeading(i.webkitCompassHeading):i.absolute&&i.alpha&&this._setCompassHeading(360-i.alpha))},_onLocationError(i){i.code==3&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(i,this))},_onLocationFound(i){if(!(this._event&&this._event.latlng.lat===i.latlng.lat&&this._event.latlng.lng===i.latlng.lng&&this._event.accuracy===i.accuracy)&&!!this._active){switch(this._event=i,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":!this._userPanned&&!this._userZoomed&&this.setView();break;case"always":this.setView();break}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){if(!this._active)return!1;if(this.options.setView==="always")return!0;if(this.options.setView==="untilPan")return!this._userPanned;if(this.options.setView==="untilPanOrZoom")return!this._userPanned&&!this._userZoomed},_isOutsideMapBounds(){return this._event===void 0?!1:this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){!this._container||(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(i){i=="requesting"?(r(this._container,"active following"),s(this._container,"requesting"),r(this._icon,this.options.icon),s(this._icon,this.options.iconLoading)):i=="active"?(r(this._container,"requesting following"),s(this._container,"active"),r(this._icon,this.options.iconLoading),s(this._icon,this.options.icon)):i=="following"&&(r(this._container,"requesting"),s(this._container,"active following"),r(this._icon,this.options.iconLoading),s(this._icon,this.options.icon))},_cleanClasses(){e.DomUtil.removeClass(this._container,"requesting"),e.DomUtil.removeClass(this._container,"active"),e.DomUtil.removeClass(this._container,"following"),r(this._icon,this.options.iconLoading),s(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return e.control.locate=i=>new e.Control.Locate(i),d},window)})(xt);var Ot=z({props:{position:{type:String,default:void 0},strings:{type:Object,default:void 0}},setup(t){const n=u.ref(u.inject("map")),e=C.default.control.locate(U(O({},t)));y.whenever(n,o=>o.addControl(e),{immediate:!0})}}),kt=z({emits:["openstreetview","closestreetview"],props:{apiKey:{type:String,default:void 0},position:{type:String,default:"bottomright"},theme:{type:String,default:"leaflet-pegman-v3-small"}},setup(t,{emit:n}){const e=u.ref(u.inject("map")),o=async s=>{t.apiKey&&await W(t.apiKey),new C.default.Control.Pegman({position:t.position,theme:t.theme}).addTo(s),new MutationObserver(h=>{var d,i;for(const a of h)if(a.type==="childList"){for(const l of a.addedNodes)(d=l.classList)!=null&&d.contains("pegman-marker")&&n("openstreetview");for(const l of a.removedNodes)(i=l.classList)!=null&&i.contains("pegman-marker")&&n("closestreetview")}}).observe(s._container,{childList:!0,subtree:!0})};y.whenever(e,o,{immediate:!0})}});g.Circle=wt,g.GoogleMaps=ft,g.LocateControl=Ot,g.MapContainer=ct,g.Mapbox=ut,g.Marker=dt,g.OpenStreetMap=ht,g.PegmanControl=kt,g.Polygon=Mt,g.Polyline=St,g.Popup=yt,g.ScaleControl=Pt,g.Tooltip=_t,g.ZoomControl=Ct,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
